--- 
Description: "AWS CloudFormation Sample Template EC2InstanceWithSecurityGroupSample:"
Outputs: 
  InstanceId: 
    Description: "InstanceId of the newly created EC2 instance"
    Value: 
      Ref: EC2Instance
Parameters: 
  ImageId: 
    Default: ami-04590e7389a6e577c
    Type: String
  InstanceType: 
    AllowedValues: 
      - t1.micro
      - t2.nano
      - t2.micro
      - t2.small
      - t2.medium
    ConstraintDescription: "must be a valid EC2 instance type."
    Default: t2.micro
    Description: "WebServer EC2 instance type"
    Type: String
  KeyName: 
    ConstraintDescription: "must be the name of an existing EC2 KeyPair."
    Default: 150060KeyPair
    Description: "Name of an existing EC2 KeyPair to enable SSH access to the instance"
    Type: String
  SSHLocation: 
    AllowedPattern: "(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})/(\\d{1,2})"
    ConstraintDescription: "must be a valid IP CIDR range of the form x.x.x.x/x."
    Default: 0.0.0.0/0
    Description: "The IP address range that can be used to SSH to the EC2 instances"
    MaxLength: "18"
    MinLength: "9"
    Type: String
  SecurityGroup: 
    Default: sg-0e8da2e1ed3a6400b
    Description: "Allowed security group details"
    Type: String
  SubnetId: 
    Default: subnet-01c6a1c7298d181ed
    Description: "Public Subnet"
    Type: String
Resources: 
  EC2Instance: 
    Properties: 
      ImageId: ImageId
      InstanceType: InstanceType
      KeyName: KeyName
      SecurityGroupIds: 
        - 
          Ref: SecurityGroup
      SubnetId: SubnetId
    Type: "AWS::EC2::Instance"
